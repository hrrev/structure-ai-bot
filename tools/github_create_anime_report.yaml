id: github_create_anime_report
name: GitHub Create Anime Intel Issue (GraphQL)
description: Create a GitHub issue with a structured anime intelligence report via GraphQL mutation. Uses safe extracted fields (no free-text) to avoid GraphQL string escaping issues.
base_url: https://api.github.com/graphql
method: POST
auth:
  type: bearer
request:
  body:
    query: "mutation { createIssue(input: {repositoryId: \"{{repo_id}}\", title: \"Anime Intel: {{title}}\", body: \"# Anime Intel Report: {{title}}\\n\\n## AniList Metadata\\n- **Score:** {{anime_score}}/100\\n- **Episodes:** {{anime_episodes}}\\n- **Studio:** {{anime_studio}}\\n- **Status:** {{anime_status}}\\n- **Season:** {{anime_season}} {{anime_season_year}}\\n- **Genres:** {{anime_genres}}\\n\\n## Sentiment Analysis\\n- **Wikipedia Sentiment:** {{wiki_sentiment}} ({{wiki_sentiment_score}})\\n\\n## Production Country (Japan)\\n- **Country:** {{country_name}}\\n- **Capital:** {{country_capital}}\\n- **Currency:** {{country_currency}}\\n- **Continent:** {{country_continent}}\\n- **Languages:** {{country_languages}}\\n\\n## Rick & Morty Easter Egg\\n- **Character Found:** {{rm_character}} ({{rm_species}}, {{rm_status}})\\n\\n## YouTube\\n- **Views:** {{youtube_views}}\\n- **Likes:** {{youtube_likes}}\\n\\n---\\n*Generated by AI Workflow Engine*\"}) { issue { id number title url } } }"
response_extract:
  fields:
    issue_id: data.createIssue.issue.id
    issue_number: data.createIssue.issue.number
    issue_title: data.createIssue.issue.title
    issue_url: data.createIssue.issue.url
